{"version":3,"file":"main-element.js","sourceRoot":"","sources":["src/main-element.ts"],"names":[],"mappings":"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","sourcesContent":["import {LitElement, html, css} from 'lit';\nimport {customElement, state} from 'lit/decorators.js';\nimport {minireset} from 'minireset.css/minireset.css.lit.js';\nimport './components/variables-container';\nimport './components/formula-container';\nimport './components/spreadsheet';\nimport {IData} from './types';\n\n@customElement('main-element')\nexport class MainElement extends LitElement {\n  static override styles = css`\n    ${minireset}\n    .main-container {\n      display: flex;\n      padding: 20px;\n    }\n  `;\n\n  @state()\n  private _data: IData = {variables: [], results: []};\n\n  @state()\n  private _isSpreadsheetVisibile = false;\n\n  private _handleAddVariable(variableName: string) {\n    const newData = {...this._data};\n    newData.variables.push({name: variableName, values: []});\n    this._data = newData;\n  }\n\n  private _handleRemoveVariable(index: number) {\n    const newData = {...this._data};\n    newData.variables = newData.variables.filter((_, i) => i !== index);\n    this._data = newData;\n  }\n\n  private _handleAddFormula(formulaName: string, formulaDefinition: string) {\n    const newData = {...this._data};\n    newData.results.push({\n      name: formulaName,\n      values: {equal: [], formulaDefinition},\n    });\n    // const newEquals = newData.results[index].values.equal.map(() => value);\n    this._data = newData;\n  }\n\n  private _handleRemoveFormula(index: number) {\n    const newData = {...this._data};\n    newData.results = newData.results.filter((_, i) => i !== index);\n    this._data = newData;\n  }\n\n  private _handeChangeValueSpreadSheet(\n    value: string,\n    indexRow: number,\n    indexColum: number\n  ) {\n    const newData = {...this._data};\n    newData.variables[indexColum].values[indexRow] = value;\n    this._data = newData;\n  }\n\n  private _handleAddEmptyRow() {\n    const newData = {...this._data};\n    newData.variables.forEach((_, index) =>\n      newData.variables[index].values.push('')\n    );\n\n    newData.results.forEach((_, index) =>\n      newData.results[index].values.equal.push(\n        newData.results[index].values.formulaDefinition\n      )\n    );\n\n    this._data = newData;\n  }\n\n  private _handleChangeFormula(value: string, name: string) {\n    const newData = {...this._data};\n    const index = newData.results.findIndex((result) => result.name === name);\n    const newEquals = newData.results[index].values.equal.map(() => value);\n\n    newData.results[index].values.formulaDefinition = value;\n    newData.results[index].values.equal = newEquals;\n\n    this._data = newData;\n  }\n\n  private _handleShowSpreadshet() {\n    this._isSpreadsheetVisibile = true;\n    this._handleAddEmptyRow();\n  }\n\n  override render() {\n    return html`\n      <div class=\"main-container\">\n        <variables-container\n          ?hidden=${this._isSpreadsheetVisibile}\n          .variables=${this._data.variables}\n          .addVariable=${this._handleAddVariable.bind(this)}\n          .removeVariable=${this._handleRemoveVariable.bind(this)}\n        ></variables-container>\n        <formula-container\n          ?hidden=${this._isSpreadsheetVisibile}\n          .results=${this._data.results}\n          .addFormula=${this._handleAddFormula.bind(this)}\n          .removeFormula=${this._handleRemoveFormula.bind(this)}\n        >\n        </formula-container>\n      </div>\n\n      <button\n        @click=${this._handleShowSpreadshet}\n        ?hidden=${this._isSpreadsheetVisibile}\n      >\n        Generate spreadsheets\n      </button>\n      <spreadsheet-element\n        ?hidden=${!this._isSpreadsheetVisibile}\n        .data=${this._data}\n        .changeInput=${this._handeChangeValueSpreadSheet.bind(this)}\n        .hamdleAddRow=${this._handleAddEmptyRow.bind(this)}\n        .handleChangeActiveFormula=${this._handleChangeFormula.bind(this)}\n      ></spreadsheet-element>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'main-element': MainElement;\n  }\n}\n"]}