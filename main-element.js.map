{"version":3,"file":"main-element.js","sourceRoot":"","sources":["src/main-element.ts"],"names":[],"mappings":"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","sourcesContent":["import {LitElement, html, css} from 'lit';\nimport {customElement, state} from 'lit/decorators.js';\nimport {minireset} from 'minireset.css/minireset.css.lit.js';\nimport './components/variables-container';\nimport './components/formula-container';\nimport './components/spreadsheet';\nimport {IData} from './types';\n\nconst sampleData: IData = {\n  variables: [\n    {name: 'var1', values: ['1', '2']},\n    {name: 'var2', values: ['3', '4']},\n    {name: 'var3', values: ['5', '6']},\n  ],\n\n  results: [\n    {\n      name: 'cof',\n      values: {\n        equal: ['var1+var2+5', 'var1+var2+5'],\n        formulaDefinition: 'var1+var2+5',\n      },\n    },\n    {\n      name: 'cof2',\n      values: {\n        equal: ['var1+var2+var3', 'var1+var2+var3'],\n        formulaDefinition: 'var1+var2+var3',\n      },\n    },\n  ],\n};\n\n@customElement('main-element')\nexport class MainElement extends LitElement {\n  static override styles = css`\n    ${minireset}\n  `;\n\n  @state()\n  private _data: IData = sampleData;\n\n  private _handleAddVariable(variableName: string) {\n    const newData = {...this._data};\n    newData.variables.push({name: variableName, values: []});\n    this._data = newData;\n  }\n  private _handleRemoveVariable(index: number) {\n    const newData = {...this._data};\n    newData.variables = newData.variables.filter((_, i) => i !== index);\n    this._data = newData;\n  }\n\n  private _handleAddFormula(formulaName: string, formulaDefinition: string) {\n    const newData = {...this._data};\n    newData.results.push({\n      name: formulaName,\n      values: {equal: [], formulaDefinition},\n    });\n    this._data = newData;\n  }\n\n  private _handleRemoveFormula(index: number) {\n    const newData = {...this._data};\n    newData.results = newData.results.filter((_, i) => i !== index);\n    this._data = newData;\n  }\n\n  private _handeChangeValueSpreadSheet(\n    value: string,\n    indexRow: number,\n    indexColum: number\n  ) {\n    const newData = {...this._data};\n    newData.variables[indexColum].values[indexRow] = value;\n    this._data = newData;\n  }\n\n  private _handleAddEmptyRow() {\n    const newData = {...this._data};\n    newData.variables.forEach((_, index) =>\n      newData.variables[index].values.push('')\n    );\n\n    newData.results.forEach((_, index) =>\n      newData.results[index].values.equal.push(\n        newData.results[index].values.formulaDefinition\n      )\n    );\n\n    this._data = newData;\n  }\n\n  private _handleChangeFormula(value: string) {\n    console.log('_handleChangeFormula', value);\n  }\n\n  private handleTestData() {\n    console.log('data', this._data);\n  }\n\n  override render() {\n    return html`\n      <variables-container\n        .variables=${this._data.variables}\n        .addVariable=${this._handleAddVariable.bind(this)}\n        .removeVariable=${this._handleRemoveVariable.bind(this)}\n      ></variables-container>\n      <formula-container\n        .results=${this._data.results}\n        .addFormula=${this._handleAddFormula.bind(this)}\n        .removeFormula=${this._handleRemoveFormula.bind(this)}\n      >\n      </formula-container>\n      <spreadsheet-element\n        .data=${this._data}\n        .changeInput=${this._handeChangeValueSpreadSheet.bind(this)}\n        .hamdleAddRow=${this._handleAddEmptyRow.bind(this)}\n        .handleChangeActiveFormula=${this._handleChangeFormula.bind(this)}\n      ></spreadsheet-element>\n      <button @click=${this.handleTestData}>Check data</button>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'main-element': MainElement;\n  }\n}\n"]}